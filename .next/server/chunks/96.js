"use strict";exports.id=96,exports.ids=[96],exports.modules={6917:(a,b,c)=>{c.d(b,{dp:()=>x.dp,Op:()=>z});var d=c(79269),e=c(60631),f=c(87503);function g(a,b){if("undefined"==typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(a,JSON.stringify(b)))}async function h(a,b){let c;if("undefined"==typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{c=await Convex.asyncSyscall(a,JSON.stringify(b))}catch(a){if(void 0!==a.data){let b=new e.i(a.message);throw b.data=(0,f.du)(a.data),b}throw Error(a.message)}return JSON.parse(c)}var i=c(48568),j=Object.defineProperty,k=(a,b,c)=>((a,b,c)=>b in a?j(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class l{constructor(){k(this,"_isExpression"),k(this,"_value")}}var m=Object.defineProperty;class n extends l{constructor(a){super(),((a,b,c)=>((a,b,c)=>b in a?m(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c))(this,"inner"),this.inner=a}serialize(){return this.inner}}function o(a){return a instanceof n?a.serialize():{$literal:(0,f.cy)(a)}}let p={eq:(a,b)=>new n({$eq:[o(a),o(b)]}),neq:(a,b)=>new n({$neq:[o(a),o(b)]}),lt:(a,b)=>new n({$lt:[o(a),o(b)]}),lte:(a,b)=>new n({$lte:[o(a),o(b)]}),gt:(a,b)=>new n({$gt:[o(a),o(b)]}),gte:(a,b)=>new n({$gte:[o(a),o(b)]}),add:(a,b)=>new n({$add:[o(a),o(b)]}),sub:(a,b)=>new n({$sub:[o(a),o(b)]}),mul:(a,b)=>new n({$mul:[o(a),o(b)]}),div:(a,b)=>new n({$div:[o(a),o(b)]}),mod:(a,b)=>new n({$mod:[o(a),o(b)]}),neg:a=>new n({$neg:o(a)}),and:(...a)=>new n({$and:a.map(o)}),or:(...a)=>new n({$or:a.map(o)}),not:a=>new n({$not:o(a)}),field:a=>new n({$field:a})};function q(a,b,c,d){if(void 0===a)throw TypeError(`Must provide arg ${b} \`${d}\` to \`${c}\``)}var r=c(43427),s=Object.defineProperty,t=(a,b,c)=>((a,b,c)=>b in a?s(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);function u(a){throw Error("consumed"===a?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}Symbol.asyncIterator;class v{constructor(a){t(this,"state"),t(this,"tableNameForErrorMessages"),this.state={type:"preparing",query:a},"FullTableScan"===a.source.type?this.tableNameForErrorMessages=a.source.tableName:this.tableNameForErrorMessages=a.source.indexName.split(".")[0]}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let a=this.state.query;return this.state={type:"closed"},a}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&u(this.state.type);let{queryId:a}=g("1.0/queryStream",{query:this.state.query,version:r.r});return this.state={type:"executing",queryId:a},a}closeQuery(){"executing"===this.state.type&&g("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(a){q(a,1,"order","order");let b=this.takeQuery();if("Search"===b.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==b.source.order)throw Error("Queries may only specify order at most once");return b.source.order=a,new v(b)}filter(a){q(a,1,"filter","predicate");let b=this.takeQuery();if(b.operators.length>=256)throw Error("Can't construct query with more than 256 operators");return b.operators.push({filter:o(a(p))}),new v(b)}limit(a){q(a,1,"limit","n");let b=this.takeQuery();return b.operators.push({limit:a}),new v(b)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&u(this.state.type);let a="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:b,done:c}=await h("1.0/queryStreamNext",{queryId:a});return c&&this.closeQuery(),{value:(0,d.du)(b),done:c}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(a){if(q(a,1,"paginate","options"),"number"!=typeof a?.numItems||a.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${a?.numItems}\`.`);let b=this.takeQuery(),c=a.numItems,e=a.cursor,f=a?.endCursor??null,g=a.maximumRowsRead??null,{page:i,isDone:j,continueCursor:k,splitCursor:l,pageStatus:m}=await h("1.0/queryPage",{query:b,cursor:e,endCursor:f,pageSize:c,maximumRowsRead:g,maximumBytesRead:a.maximumBytesRead,version:r.r});return{page:i.map(a=>(0,d.du)(a)),isDone:j,continueCursor:k,splitCursor:l,pageStatus:m}}async collect(){let a=[];for await(let b of this)a.push(b);return a}async take(a){q(a,1,"take","n");if(!Number.isInteger(a)||a<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(a).collect()}async first(){let a=await this.take(1);return 0===a.length?null:a[0]}async unique(){let a=await this.take(2);if(0===a.length)return null;if(2===a.length)throw Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:
 [${a[0]._id}, ${a[1]._id}, ...]`);return a[0]}}var w=c(43126);w.v.object({numItems:w.v.number(),cursor:w.v.union(w.v.string(),w.v.null()),endCursor:w.v.optional(w.v.union(w.v.string(),w.v.null())),id:w.v.optional(w.v.number()),maximumRowsRead:w.v.optional(w.v.number()),maximumBytesRead:w.v.optional(w.v.number())});var x=c(44283),y=Object.defineProperty;let z=()=>(function a(b,c){return new Proxy({},{get(d,e){if("string"==typeof e)return a(b,[...c,e]);if(e===i.QY){if(c.length<1){let a=[b,...c].join(".");throw Error(`API path is expected to be of the form \`${b}.childComponent.functionName\`. Found: \`${a}\``)}return"_reference/childComponent/"+c.join("/")}}})})("components",[]);var A=Object.defineProperty,B=(a,b,c)=>((a,b,c)=>b in a?A(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class C{constructor(a){B(this,"indexes"),B(this,"stagedDbIndexes"),B(this,"searchIndexes"),B(this,"stagedSearchIndexes"),B(this,"vectorIndexes"),B(this,"stagedVectorIndexes"),B(this,"validator"),this.indexes=[],this.stagedDbIndexes=[],this.searchIndexes=[],this.stagedSearchIndexes=[],this.vectorIndexes=[],this.stagedVectorIndexes=[],this.validator=a}" indexes"(){return this.indexes}index(a,b){return Array.isArray(b)?this.indexes.push({indexDescriptor:a,fields:b}):b.staged?this.stagedDbIndexes.push({indexDescriptor:a,fields:b.fields}):this.indexes.push({indexDescriptor:a,fields:b.fields}),this}searchIndex(a,b){return b.staged?this.stagedSearchIndexes.push({indexDescriptor:a,searchField:b.searchField,filterFields:b.filterFields||[]}):this.searchIndexes.push({indexDescriptor:a,searchField:b.searchField,filterFields:b.filterFields||[]}),this}vectorIndex(a,b){return b.staged?this.stagedVectorIndexes.push({indexDescriptor:a,vectorField:b.vectorField,dimensions:b.dimensions,filterFields:b.filterFields||[]}):this.vectorIndexes.push({indexDescriptor:a,vectorField:b.vectorField,dimensions:b.dimensions,filterFields:b.filterFields||[]}),this}self(){return this}export(){let a=this.validator.json;if("object"!=typeof a)throw Error("Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)");return{indexes:this.indexes,stagedDbIndexes:this.stagedDbIndexes,searchIndexes:this.searchIndexes,stagedSearchIndexes:this.stagedSearchIndexes,vectorIndexes:this.vectorIndexes,stagedVectorIndexes:this.stagedVectorIndexes,documentType:a}}}function D(a){return new C((0,w.d)(a)?a:w.v.object(a))}class E{constructor(a,b){B(this,"tables"),B(this,"strictTableNameTypes"),B(this,"schemaValidation"),this.tables=a,this.schemaValidation=b?.schemaValidation===void 0||b.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([a,b])=>{let{indexes:c,stagedDbIndexes:d,searchIndexes:e,stagedSearchIndexes:f,vectorIndexes:g,stagedVectorIndexes:h,documentType:i}=b.export();return{tableName:a,indexes:c,stagedDbIndexes:d,searchIndexes:e,stagedSearchIndexes:f,vectorIndexes:g,stagedVectorIndexes:h,documentType:i}}),schemaValidation:this.schemaValidation})}}new E({_scheduled_functions:D({name:w.v.string(),args:w.v.array(w.v.any()),scheduledTime:w.v.float64(),completedTime:w.v.optional(w.v.float64()),state:w.v.union(w.v.object({kind:w.v.literal("pending")}),w.v.object({kind:w.v.literal("inProgress")}),w.v.object({kind:w.v.literal("success")}),w.v.object({kind:w.v.literal("failed"),error:w.v.string()}),w.v.object({kind:w.v.literal("canceled")}))}),_storage:D({sha256:w.v.string(),size:w.v.float64(),contentType:w.v.optional(w.v.string())})},void 0)},37820:(a,b,c)=>{let d;c.d(b,{Tb:()=>y});var e=c(79269),f=Object.defineProperty,g=(a,b,c)=>((a,b,c)=>b in a?f(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class h{constructor(a){g(this,"_onLogLineFuncs"),g(this,"_verbose"),this._onLogLineFuncs={},this._verbose=a.verbose}addLogLineListener(a){let b=Math.random().toString(36).substring(2,15);for(let a=0;a<10&&void 0!==this._onLogLineFuncs[b];a++)b=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[b]=a,()=>{delete this._onLogLineFuncs[b]}}logVerbose(...a){if(this._verbose)for(let b of Object.values(this._onLogLineFuncs))b("debug",`${new Date().toISOString()}`,...a)}log(...a){for(let b of Object.values(this._onLogLineFuncs))b("info",...a)}warn(...a){for(let b of Object.values(this._onLogLineFuncs))b("warn",...a)}error(...a){for(let b of Object.values(this._onLogLineFuncs))b("error",...a)}}function i(a,b,c,d,e){let f=function(a){switch(a){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}(c);if("object"==typeof e&&(e=`ConvexError ${JSON.stringify(e.errorData,null,2)}`),"info"===b){let b=e.match(/^\[.*?\] /);if(null===b)return void a.error(`[CONVEX ${f}(${d})] Could not parse console.log`);let c=e.slice(1,b[0].length-2),g=e.slice(b[0].length);a.log(`%c[CONVEX ${f}(${d})] [${c}]`,"color:rgb(0, 145, 255)",g)}else a.error(`[CONVEX ${f}(${d})] ${e}`)}var j=c(44283);c(60631);var k=Object.defineProperty,l=(a,b,c)=>((a,b,c)=>b in a?k(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class m{constructor(a,b){l(this,"low"),l(this,"high"),l(this,"__isUnsignedLong__"),this.low=0|a,this.high=0|b,this.__isUnsignedLong__=!0}static isLong(a){return!0===(a&&a.__isUnsignedLong__)}static fromBytesLE(a){return new m(a[0]|a[1]<<8|a[2]<<16|a[3]<<24,a[4]|a[5]<<8|a[6]<<16|a[7]<<24)}toBytesLE(){let a=this.high,b=this.low;return[255&b,b>>>8&255,b>>>16&255,b>>>24,255&a,a>>>8&255,a>>>16&255,a>>>24]}static fromNumber(a){return isNaN(a)||a<0?n:a>=p?q:new m(a%o|0,a/o|0)}toString(){return(BigInt(this.high)*BigInt(o)+BigInt(this.low)).toString()}equals(a){return m.isLong(a)||(a=m.fromValue(a)),(this.high>>>31!=1||a.high>>>31!=1)&&this.high===a.high&&this.low===a.low}notEquals(a){return!this.equals(a)}comp(a){return(m.isLong(a)||(a=m.fromValue(a)),this.equals(a))?0:a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(a){return 0>=this.comp(a)}static fromValue(a){return"number"==typeof a?m.fromNumber(a):new m(a.low,a.high)}}let n=new m(0,0),o=0x100000000,p=0xffffffffffffffff,q=new m(-1,-1);class r extends Error{}r.prototype.name="InvalidTokenError";var s=c(8086),t=c(33873),u=c(93533),v=c(43427),w=Object.defineProperty,x=(a,b,c)=>((a,b,c)=>b in a?w(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);class y{constructor(a,b){if(x(this,"address"),x(this,"auth"),x(this,"adminAuth"),x(this,"encodedTsPromise"),x(this,"debug"),x(this,"fetchOptions"),x(this,"fetch"),x(this,"logger"),x(this,"mutationQueue",[]),x(this,"isProcessingQueue",!1),"boolean"==typeof b)throw Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");!0!==(b??{}).skipConvexDeploymentUrlCheck&&(0,u.R6)(a),this.logger=b?.logger===!1?new h({verbose:!1}):b?.logger!==!0&&b?.logger?b.logger:function(a){let b=new h(a);return b.addLogLineListener((a,...b)=>{switch(a){case"debug":console.debug(...b);break;case"info":default:console.log(...b);break;case"warn":console.warn(...b);break;case"error":console.error(...b)}}),b}({verbose:!1}),this.address=a,this.debug=!0,this.auth=void 0,this.adminAuth=void 0,this.fetch=b?.fetch,b?.auth&&this.setAuth(b.auth)}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(a){this.clearAuth(),this.auth=a}setAdminAuth(a,b){if(this.clearAuth(),void 0!==b){let c=btoa(String.fromCodePoint(...new TextEncoder().encode(JSON.stringify(b))));this.adminAuth=`${a}:${c}`}else this.adminAuth=a}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(a){this.debug=a}setFetchOptions(a){this.fetchOptions=a}async consistentQuery(a,...b){let c=(0,u.Zy)(b[0]),d=this.getTimestamp();return await this.queryInner(a,c,{timestampPromise:d})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){let a=this.fetch||d||fetch,b={"Content-Type":"application/json","Convex-Client":`npm-${v.r}`},c=await a(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:b});if(!c.ok)throw Error(await c.text());let{ts:e}=await c.json();return e}async query(a,...b){let c=(0,u.Zy)(b[0]);return await this.queryInner(a,c,{})}async queryInner(a,b,c){let f=(0,j.qQ)(a),g=[(0,e.rz)(b)],h={"Content-Type":"application/json","Convex-Client":`npm-${v.r}`};this.adminAuth?h.Authorization=`Convex ${this.adminAuth}`:this.auth&&(h.Authorization=`Bearer ${this.auth}`);let k=this.fetch||d||fetch,l=c.timestampPromise?await c.timestampPromise:void 0,m=JSON.stringify({path:f,format:"convex_encoded_json",args:g,...l?{ts:l}:{}}),n=l?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,o=await k(n,{...this.fetchOptions,body:m,method:"POST",headers:h});if(!o.ok&&560!==o.status)throw Error(await o.text());let p=await o.json();if(this.debug)for(let a of p.logLines??[])i(this.logger,"info","query",f,a);switch(p.status){case"success":return(0,e.du)(p.value);case"error":if(void 0!==p.errorData)throw z(p.errorData,new e.ik(p.errorMessage));throw Error(p.errorMessage);default:throw Error(`Invalid response: ${JSON.stringify(p)}`)}}async mutationInner(a,b){let c=(0,j.qQ)(a),f=JSON.stringify({path:c,format:"convex_encoded_json",args:[(0,e.rz)(b)]}),g={"Content-Type":"application/json","Convex-Client":`npm-${v.r}`};this.adminAuth?g.Authorization=`Convex ${this.adminAuth}`:this.auth&&(g.Authorization=`Bearer ${this.auth}`);let h=this.fetch||d||fetch,k=await h(`${this.address}/api/mutation`,{...this.fetchOptions,body:f,method:"POST",headers:g});if(!k.ok&&560!==k.status)throw Error(await k.text());let l=await k.json();if(this.debug)for(let a of l.logLines??[])i(this.logger,"info","mutation",c,a);switch(l.status){case"success":return(0,e.du)(l.value);case"error":if(void 0!==l.errorData)throw z(l.errorData,new e.ik(l.errorMessage));throw Error(l.errorMessage);default:throw Error(`Invalid response: ${JSON.stringify(l)}`)}}async processMutationQueue(){if(!this.isProcessingQueue){for(this.isProcessingQueue=!0;this.mutationQueue.length>0;){let{mutation:a,args:b,resolve:c,reject:d}=this.mutationQueue.shift();try{let d=await this.mutationInner(a,b);c(d)}catch(a){d(a)}}this.isProcessingQueue=!1}}enqueueMutation(a,b){return new Promise((c,d)=>{this.mutationQueue.push({mutation:a,args:b,resolve:c,reject:d}),this.processMutationQueue()})}async mutation(a,...b){let[c,d]=b,e=(0,u.Zy)(c);return d?.skipQueue?await this.mutationInner(a,e):await this.enqueueMutation(a,e)}async action(a,...b){let c=(0,u.Zy)(b[0]),f=(0,j.qQ)(a),g=JSON.stringify({path:f,format:"convex_encoded_json",args:[(0,e.rz)(c)]}),h={"Content-Type":"application/json","Convex-Client":`npm-${v.r}`};this.adminAuth?h.Authorization=`Convex ${this.adminAuth}`:this.auth&&(h.Authorization=`Bearer ${this.auth}`);let k=this.fetch||d||fetch,l=await k(`${this.address}/api/action`,{...this.fetchOptions,body:g,method:"POST",headers:h});if(!l.ok&&560!==l.status)throw Error(await l.text());let m=await l.json();if(this.debug)for(let a of m.logLines??[])i(this.logger,"info","action",f,a);switch(m.status){case"success":return(0,e.du)(m.value);case"error":if(void 0!==m.errorData)throw z(m.errorData,new e.ik(m.errorMessage));throw Error(m.errorMessage);default:throw Error(`Invalid response: ${JSON.stringify(m)}`)}}async function(a,b,...c){let f=(0,u.Zy)(c[0]),g="string"==typeof a?a:(0,j.qQ)(a),h=JSON.stringify({componentPath:b,path:g,format:"convex_encoded_json",args:(0,e.rz)(f)}),k={"Content-Type":"application/json","Convex-Client":`npm-${v.r}`};this.adminAuth?k.Authorization=`Convex ${this.adminAuth}`:this.auth&&(k.Authorization=`Bearer ${this.auth}`);let l=this.fetch||d||fetch,m=await l(`${this.address}/api/function`,{...this.fetchOptions,body:h,method:"POST",headers:k});if(!m.ok&&560!==m.status)throw Error(await m.text());let n=await m.json();if(this.debug)for(let a of n.logLines??[])i(this.logger,"info","any",g,a);switch(n.status){case"success":return(0,e.du)(n.value);case"error":if(void 0!==n.errorData)throw z(n.errorData,new e.ik(n.errorMessage));throw Error(n.errorMessage);default:throw Error(`Invalid response: ${JSON.stringify(n)}`)}}}function z(a,b){return b.data=(0,e.du)(a),b}let A=(0,s.createRequire)((0,t.resolve)("."));var B=Object.create,C=Object.defineProperty,D=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,F=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty,H=(a=>void 0!==A?A:"undefined"!=typeof Proxy?new Proxy(a,{get:(a,b)=>(void 0!==A?A:a)[b]}):a)(function(a){if(void 0!==A)return A.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')}),I=(a,b)=>function(){return b||(0,a[E(a)[0]])((b={exports:{}}).exports,b),b.exports},J=(a,b,c)=>(c=null!=a?B(F(a)):{},((a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of E(b))G.call(a,e)||e===c||C(a,e,{get:()=>b[e],enumerable:!(d=D(b,e))||d.enumerable});return a})(!b&&a&&a.__esModule?c:C(c,"default",{value:a,enumerable:!0}),a)),K=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/stream.js"(a,b){var{Duplex:c}=H("stream");function d(a){a.emit("close")}function e(){!this.destroyed&&this._writableState.finished&&this.destroy()}function f(a){this.removeListener("error",f),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let g=!0,h=new c({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(g=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,c){if(a.readyState===a.CLOSED){c(b),process.nextTick(d,h);return}let e=!1;a.once("error",function(a){e=!0,c(a)}),a.once("close",function(){e||c(b),process.nextTick(d,h)}),g&&a.terminate()},h._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._write(b,c,d)});a.send(b,d)},h.on("end",e),h.on("error",f),h}}}),L=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/constants.js"(a,b){var c=["nodebuffer","arraybuffer","fragments"],d="undefined"!=typeof Blob;d&&c.push("blob"),b.exports={BINARY_TYPES:c,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:d,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}}}),M=I({"../common/temp/node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/node-gyp-build.js"(a,b){var c=H("fs"),d=H("path"),e=H("os"),f=process.config&&process.config.variables||{},g=!!process.env.PREBUILDS_ONLY,h=process.versions.modules,i=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",j=process.env.npm_config_arch||e.arch(),k=process.env.npm_config_platform||e.platform(),l=process.env.LIBC||("linux"===k&&c.existsSync("/etc/alpine-release")?"musl":"glibc"),m=process.env.ARM_VERSION||("arm64"===j?"8":f.arm_version)||"",n=(process.versions.uv||"").split(".")[0];function o(a){return A(o.resolve(a))}function p(a){try{return c.readdirSync(a)}catch(a){return[]}}function q(a,b){var c=p(a).filter(b);return c[0]&&d.join(a,c[0])}function r(a){return/\.node$/.test(a)}function s(a){var b=a.split("-");if(2===b.length){var c=b[0],d=b[1].split("+");if(c&&d.length&&d.every(Boolean))return{name:a,platform:c,architectures:d}}}function t(a,b){return function(c){return null!=c&&c.platform===a&&c.architectures.includes(b)}}function u(a,b){return a.architectures.length-b.architectures.length}function v(a){var b=a.split("."),c=b.pop(),d={file:a,specificity:0};if("node"===c){for(var e=0;e<b.length;e++){var f=b[e];if("node"===f||"electron"===f||"node-webkit"===f)d.runtime=f;else if("napi"===f)d.napi=!0;else if("abi"===f.slice(0,3))d.abi=f.slice(3);else if("uv"===f.slice(0,2))d.uv=f.slice(2);else if("armv"===f.slice(0,4))d.armv=f.slice(4);else{if("glibc"!==f&&"musl"!==f)continue;d.libc=f}d.specificity++}return d}}function w(a,b){return function(c){var d;return null!=c&&(!c.runtime||c.runtime===a||!!("node"===(d=c).runtime&&d.napi))&&(!c.abi||c.abi===b||!!c.napi)&&(!c.uv||c.uv===n)&&(!c.armv||c.armv===m)&&(!c.libc||c.libc===l)&&!0}}function x(a){return function(b,c){return b.runtime!==c.runtime?b.runtime===a?-1:1:b.abi!==c.abi?b.abi?-1:1:b.specificity!==c.specificity?b.specificity>c.specificity?-1:1:0}}b.exports=o,o.resolve=o.path=function(a){a=d.resolve(a||".");try{var b=A(d.join(a,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[b+"_PREBUILD"]&&(a=process.env[b+"_PREBUILD"])}catch(a){}if(!g){var c=q(d.join(a,"build/Release"),r);if(c)return c;var e=q(d.join(a,"build/Debug"),r);if(e)return e}var f=y(a);if(f)return f;var o=y(d.dirname(process.execPath));if(o)return o;throw Error("No native build was found for "+["platform="+k,"arch="+j,"runtime="+i,"abi="+h,"uv="+n,m?"armv="+m:"","libc="+l,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ")+"\n    loaded from: "+a+"\n");function y(a){var b=p(d.join(a,"prebuilds")).map(s).filter(t(k,j)).sort(u)[0];if(b){var c=d.join(a,"prebuilds",b.name),e=p(c).map(v).filter(w(i,h)).sort(x(i))[0];if(e)return d.join(c,e.file)}}},o.parseTags=v,o.matchTags=w,o.compareTags=x,o.parseTuple=s,o.matchTuple=t,o.compareTuples=u}}),N=I({"../common/temp/node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/index.js"(a,b){"function"==typeof A.addon?b.exports=A.addon.bind(A):b.exports=M()}}),O=I({"../common/temp/node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/fallback.js"(a,b){b.exports={mask:(a,b,c,d,e)=>{for(var f=0;f<e;f++)c[d+f]=a[f]^b[3&f]},unmask:(a,b)=>{let c=a.length;for(var d=0;d<c;d++)a[d]^=b[3&d]}}}}),P=I({"../common/temp/node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/index.js"(a,b){try{b.exports=N()(__dirname)}catch(a){b.exports=O()}}}),Q=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/buffer-util.js"(a,b){var{EMPTY_BUFFER:c}=L(),d=Buffer[Symbol.species];function e(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function f(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function g(a){let b;return(g.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new d(a):ArrayBuffer.isView(a)?b=new d(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),g.readOnly=!1),b)}if(b.exports={concat:function(a,b){if(0===a.length)return c;if(1===a.length)return a[0];let e=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let c=a[b];e.set(c,f),f+=c.length}return f<b?new d(e.buffer,e.byteOffset,f):e},mask:e,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:g,unmask:f},!process.env.WS_NO_BUFFER_UTIL)try{let a=P();b.exports.mask=function(b,c,d,f,g){g<48?e(b,c,d,f,g):a.mask(b,c,d,f,g)},b.exports.unmask=function(b,c){b.length<32?f(b,c):a.unmask(b,c)}}catch(a){}}}),R=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/limiter.js"(a,b){var c=Symbol("kDone"),d=Symbol("kRun");b.exports=class{constructor(a){this[c]=()=>{this.pending--,this[d]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[d]()}[d](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[c])}}}}}),S=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/permessage-deflate.js"(a,b){var c,d=H("zlib"),e=Q(),f=R(),{kStatusCode:g}=L(),h=Buffer[Symbol.species],i=Buffer.from([0,0,255,255]),j=Symbol("permessage-deflate"),k=Symbol("total-length"),l=Symbol("callback"),m=Symbol("buffers"),n=Symbol("error");function o(a){this[m].push(a),this[k]+=a.length}function p(a){if(this[k]+=a.length,this[j]._maxPayload<1||this[k]<=this[j]._maxPayload)return void this[m].push(a);this[n]=RangeError("Max payload size exceeded"),this[n].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[n][g]=1009,this.removeListener("data",p),this.reset()}function q(a){this[j]._inflate=null,a[g]=1007,this[l](a)}b.exports=class{constructor(a,b,d){this._maxPayload=0|d,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,c||(c=new f(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[l];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,d){c.add(c=>{this._decompress(a,b,(a,b)=>{c(),d(a,b)})})}compress(a,b,d){c.add(c=>{this._compress(a,b,(a,b)=>{c(),d(a,b)})})}_decompress(a,b,c){let f=this._isServer?"client":"server";if(!this._inflate){let a=`${f}_max_window_bits`,b="number"!=typeof this.params[a]?d.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=d.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[j]=this,this._inflate[k]=0,this._inflate[m]=[],this._inflate.on("error",q),this._inflate.on("data",p)}this._inflate[l]=c,this._inflate.write(a),b&&this._inflate.write(i),this._inflate.flush(()=>{let a=this._inflate[n];if(a){this._inflate.close(),this._inflate=null,c(a);return}let d=e.concat(this._inflate[m],this._inflate[k]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[k]=0,this._inflate[m]=[],b&&this.params[`${f}_no_context_takeover`]&&this._inflate.reset()),c(null,d)})}_compress(a,b,c){let f=this._isServer?"server":"client";if(!this._deflate){let a=`${f}_max_window_bits`,b="number"!=typeof this.params[a]?d.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=d.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[k]=0,this._deflate[m]=[],this._deflate.on("data",o)}this._deflate[l]=c,this._deflate.write(a),this._deflate.flush(d.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=e.concat(this._deflate[m],this._deflate[k]);b&&(a=new h(a.buffer,a.byteOffset,a.length-4)),this._deflate[l]=null,this._deflate[k]=0,this._deflate[m]=[],b&&this.params[`${f}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}}}),T=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/validation.js"(a,b){var{isUtf8:c}=H("buffer"),{hasBlob:d}=L();function e(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(b.exports={isBlob:function(a){return d&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:e,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},c)b.exports.isValidUTF8=function(a){return a.length<24?e(a):c(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let a=H("utf-8-validate");b.exports.isValidUTF8=function(b){return b.length<32?e(b):a(b)}}catch(a){}}}),U=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/receiver.js"(a,b){var{Writable:c}=H("stream"),d=S(),{BINARY_TYPES:e,EMPTY_BUFFER:f,kStatusCode:g,kWebSocket:h}=L(),{concat:i,toArrayBuffer:j,unmask:k}=Q(),{isValidStatusCode:l,isValidUTF8:m}=T(),n=Buffer[Symbol.species];b.exports=class extends c{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||e[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[h]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new n(b.buffer,b.byteOffset+a,b.length-a),new n(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new n(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0);return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[d.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);if(c>2097151)return void a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a)}haveLength(a){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return void a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=f;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&k(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[d.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?i(c,b):"arraybuffer"===this._binaryType?j(i(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=i(c,b);if(!this._skipUTF8Validation&&!m(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,f),this.end();else{let c=a.readUInt16BE(0);if(!l(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new n(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!m(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[g]=d,f}}}}),V=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/sender.js"(a,b){var c,{Duplex:d}=H("stream"),{randomFillSync:e}=H("crypto"),f=S(),{EMPTY_BUFFER:g,kWebSocket:h,NOOP:i}=L(),{isBlob:j,isValidStatusCode:k}=T(),{mask:l,toBuffer:m}=Q(),n=Symbol("kByteLength"),o=Buffer.alloc(4),p=8192;function q(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function r(a,b,c){q(a,b,c),a.onerror(b)}b.exports=class a{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=i,this[h]=void 0}static frame(a,b){let d,f,g=!1,h=2,i=!1;b.mask&&(d=b.maskBuffer||o,b.generateMask?b.generateMask(d):(8192===p&&(void 0===c&&(c=Buffer.alloc(8192)),e(c,0,8192),p=0),d[0]=c[p++],d[1]=c[p++],d[2]=c[p++],d[3]=c[p++]),i=(d[0]|d[1]|d[2]|d[3])==0,h=6),"string"==typeof a?f=(!b.mask||i)&&void 0!==b[n]?b[n]:(a=Buffer.from(a)).length:(f=a.length,g=b.mask&&b.readOnly&&!i);let j=f;f>=65536?(h+=8,j=127):f>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?f+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(f,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(f,4,6)),b.mask)?(k[1]|=128,k[h-4]=d[0],k[h-3]=d[1],k[h-2]=d[2],k[h-1]=d[3],i)?[k,a]:g?(l(a,d,k,h,f),[k]):(l(a,d,a,0,f),[k,a]):[k,a]}close(b,c,d,e){let f;if(void 0===b)f=g;else if("number"==typeof b&&k(b))if(void 0!==c&&c.length){let a=Buffer.byteLength(c);if(a>123)throw RangeError("The message must not be greater than 123 bytes");(f=Buffer.allocUnsafe(2+a)).writeUInt16BE(b,0),"string"==typeof c?f.write(c,2):f.set(c,2)}else(f=Buffer.allocUnsafe(2)).writeUInt16BE(b,0);else throw TypeError("First argument must be a valid error code number");let h={[n]:f.length,fin:!0,generateMask:this._generateMask,mask:d,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,f,!1,h,e]):this.sendFrame(a.frame(f,h),e)}ping(b,c,d){let e,f;if("string"==typeof b?(e=Buffer.byteLength(b),f=!1):j(b)?(e=b.size,f=!1):(e=(b=m(b)).length,f=m.readOnly),e>125)throw RangeError("The data size must not be greater than 125 bytes");let g={[n]:e,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:9,readOnly:f,rsv1:!1};j(b)?0!==this._state?this.enqueue([this.getBlobData,b,!1,g,d]):this.getBlobData(b,!1,g,d):0!==this._state?this.enqueue([this.dispatch,b,!1,g,d]):this.sendFrame(a.frame(b,g),d)}pong(b,c,d){let e,f;if("string"==typeof b?(e=Buffer.byteLength(b),f=!1):j(b)?(e=b.size,f=!1):(e=(b=m(b)).length,f=m.readOnly),e>125)throw RangeError("The data size must not be greater than 125 bytes");let g={[n]:e,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:10,readOnly:f,rsv1:!1};j(b)?0!==this._state?this.enqueue([this.getBlobData,b,!1,g,d]):this.getBlobData(b,!1,g,d):0!==this._state?this.enqueue([this.dispatch,b,!1,g,d]):this.sendFrame(a.frame(b,g),d)}send(a,b,c){let d,e,g=this._extensions[f.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):j(a)?(d=a.size,e=!1):(d=(a=m(a)).length,e=m.readOnly),this._firstFragment?(this._firstFragment=!1,i&&g&&g.params[g._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=g._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let k={[n]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};j(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,k,c]):this.getBlobData(a,this._compress,k,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,k,c]):this.dispatch(a,this._compress,k,c)}getBlobData(b,c,d,e){this._bufferedBytes+=d[n],this._state=2,b.arrayBuffer().then(b=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(q,this,a,e);return}this._bufferedBytes-=d[n];let f=m(b);c?this.dispatch(f,c,d,e):(this._state=0,this.sendFrame(a.frame(f,d),e),this.dequeue())}).catch(a=>{process.nextTick(r,this,a,e)})}dispatch(b,c,d,e){if(!c)return void this.sendFrame(a.frame(b,d),e);let g=this._extensions[f.extensionName];this._bufferedBytes+=d[n],this._state=1,g.compress(b,d.fin,(b,c)=>{if(this._socket.destroyed)return void q(this,Error("The socket was closed while data was being compressed"),e);this._bufferedBytes-=d[n],this._state=0,d.readOnly=!1,this.sendFrame(a.frame(c,d),e),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][n],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][n],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}}}),W=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/event-target.js"(a,b){var{kForOnEventAttribute:c,kListener:d}=L(),e=Symbol("kCode"),f=Symbol("kData"),g=Symbol("kError"),h=Symbol("kMessage"),i=Symbol("kReason"),j=Symbol("kTarget"),k=Symbol("kType"),l=Symbol("kWasClean"),m=class{constructor(a){this[j]=null,this[k]=a}get target(){return this[j]}get type(){return this[k]}};Object.defineProperty(m.prototype,"target",{enumerable:!0}),Object.defineProperty(m.prototype,"type",{enumerable:!0});var n=class extends m{constructor(a,b={}){super(a),this[e]=void 0===b.code?0:b.code,this[i]=void 0===b.reason?"":b.reason,this[l]=void 0!==b.wasClean&&b.wasClean}get code(){return this[e]}get reason(){return this[i]}get wasClean(){return this[l]}};Object.defineProperty(n.prototype,"code",{enumerable:!0}),Object.defineProperty(n.prototype,"reason",{enumerable:!0}),Object.defineProperty(n.prototype,"wasClean",{enumerable:!0});var o=class extends m{constructor(a,b={}){super(a),this[g]=void 0===b.error?null:b.error,this[h]=void 0===b.message?"":b.message}get error(){return this[g]}get message(){return this[h]}};Object.defineProperty(o.prototype,"error",{enumerable:!0}),Object.defineProperty(o.prototype,"message",{enumerable:!0});var p=class extends m{constructor(a,b={}){super(a),this[f]=void 0===b.data?null:b.data}get data(){return this[f]}};function q(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(p.prototype,"data",{enumerable:!0}),b.exports={CloseEvent:n,ErrorEvent:o,Event:m,EventTarget:{addEventListener(a,b,e={}){let f;for(let f of this.listeners(a))if(!e[c]&&f[d]===b&&!f[c])return;if("message"===a)f=function(a,c){let d=new p("message",{data:c?a:a.toString()});d[j]=this,q(b,this,d)};else if("close"===a)f=function(a,c){let d=new n("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[j]=this,q(b,this,d)};else if("error"===a)f=function(a){let c=new o("error",{error:a,message:a.message});c[j]=this,q(b,this,c)};else{if("open"!==a)return;f=function(){let a=new m("open");a[j]=this,q(b,this,a)}}f[c]=!!e[c],f[d]=b,e.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let e of this.listeners(a))if(e[d]===b&&!e[c]){this.removeListener(a,e);break}}},MessageEvent:p}}}),X=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/extension.js"(a,b){var{tokenChars:c}=T();function d(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,e,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===c[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(d(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===e)if(-1===m&&1===c[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),d(g,a.slice(k,m),!0),44===l&&(d(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)e=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==c[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===c[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===c[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);h&&(c=c.replace(/\\/g,""),h=!1),d(g,e,c),44===l&&(d(f,b,g),g=Object.create(null),b=void 0),e=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?d(f,o,g):(void 0===e?d(g,o,!0):h?d(g,e,o.replace(/\\/g,"")):d(g,e,o),d(f,b,g)),f}}}}),Y=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/websocket.js"(a,b){var c=H("events"),d=H("https"),e=H("http"),f=H("net"),g=H("tls"),{randomBytes:h,createHash:i}=H("crypto"),{Duplex:j,Readable:k}=H("stream"),{URL:l}=H("url"),m=S(),n=U(),o=V(),{isBlob:p}=T(),{BINARY_TYPES:q,EMPTY_BUFFER:r,GUID:s,kForOnEventAttribute:t,kListener:u,kStatusCode:v,kWebSocket:w,NOOP:x}=L(),{EventTarget:{addEventListener:y,removeEventListener:z}}=W(),{format:A,parse:B}=X(),{toBuffer:C}=Q(),D=Symbol("kAborted"),E=[8,13],F=["CONNECTING","OPEN","CLOSING","CLOSED"],G=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,I=class a extends c{constructor(b,c,f){super(),this._binaryType=q[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=r,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=a.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==b?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===c?c=[]:Array.isArray(c)||("object"==typeof c&&null!==c?(f=c,c=[]):c=[c]),function a(b,c,f,g){let j,k,n,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:E[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!E.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${E.join(", ")})`);if(c instanceof l)j=c;else try{j=new l(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===j.protocol?j.protocol="ws:":"https:"===j.protocol&&(j.protocol="wss:"),b._url=j.href;let q="wss:"===j.protocol,r="ws+unix:"===j.protocol;if("ws:"===j.protocol||q||r?r&&!j.pathname?k="The URL's pathname is empty":j.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let t=q?443:80,u=h(16).toString("base64"),v=q?d.request:e.request,w=new Set;if(p.createConnection=p.createConnection||(q?M:K),p.defaultPort=p.defaultPort||t,p.port=j.port||t,p.host=j.hostname.startsWith("[")?j.hostname.slice(1,-1):j.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=j.pathname+j.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(n=new m(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=A({[m.extensionName]:n.offer()})),f.length){for(let a of f){if("string"!=typeof a||!G.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=f.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(j.username||j.password)&&(p.auth=`${j.username}:${j.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:j.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&j.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{N(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[D]||(o=b._req=null,J(b,a))}),o.on("response",d=>{let e=d.headers.location,h=d.statusCode;if(e&&p.followRedirects&&h>=300&&h<400){let d;if(++b._redirects>p.maxRedirects)return void N(b,o,"Maximum redirects exceeded");o.abort();try{d=new l(e,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${e}`));return}a(b,d,f,g)}else b.emit("unexpected-response",o,d)||N(b,o,`Unexpected server response: ${d.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void N(b,c,"Invalid Upgrade header");let g=i("sha1").update(u+s).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void N(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void N(b,c,e);h&&(b._protocol=h);let j=a.headers["sec-websocket-extensions"];if(void 0!==j){let a;if(!n)return void N(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=B(j)}catch(a){N(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==m.extensionName)return void N(b,c,"Server indicated an extension that was not requested");try{n.accept(a[m.extensionName])}catch(a){N(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[m.extensionName]=n}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,b,c,f)):(this._autoPong=f.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){q.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(b,c,d){let e=new n({allowSynchronousEvents:d.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:d.maxPayload,skipUTF8Validation:d.skipUTF8Validation}),f=new o(b,this._extensions,d.generateMask);this._receiver=e,this._sender=f,this._socket=b,e[w]=this,f[w]=this,b[w]=this,e.on("conclude",P),e.on("drain",R),e.on("error",Y),e.on("message",$),e.on("ping",_),e.on("pong",aa),f.onerror=ac,b.setTimeout&&b.setTimeout(0),b.setNoDelay&&b.setNoDelay(),c.length>0&&b.unshift(c),b.on("close",ae),b.on("data",af),b.on("end",ag),b.on("error",ah),this._readyState=a.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=a.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[m.extensionName]&&this._extensions[m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=a.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(b,c){if(this.readyState!==a.CLOSED){if(this.readyState===a.CONNECTING)return void N(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===a.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=a.CLOSING,this._sender.close(b,c,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),ad(this)}}pause(){this.readyState!==a.CONNECTING&&this.readyState!==a.CLOSED&&(this._paused=!0,this._socket.pause())}ping(b,c,d){if(this.readyState===a.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b?(d=b,b=c=void 0):"function"==typeof c&&(d=c,c=void 0),"number"==typeof b&&(b=b.toString()),this.readyState!==a.OPEN)return void O(this,b,d);void 0===c&&(c=!this._isServer),this._sender.ping(b||r,c,d)}pong(b,c,d){if(this.readyState===a.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b?(d=b,b=c=void 0):"function"==typeof c&&(d=c,c=void 0),"number"==typeof b&&(b=b.toString()),this.readyState!==a.OPEN)return void O(this,b,d);void 0===c&&(c=!this._isServer),this._sender.pong(b||r,c,d)}resume(){this.readyState!==a.CONNECTING&&this.readyState!==a.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(b,c,d){if(this.readyState===a.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof c&&(d=c,c={}),"number"==typeof b&&(b=b.toString()),this.readyState!==a.OPEN)return void O(this,b,d);let e={binary:"string"!=typeof b,mask:!this._isServer,compress:!0,fin:!0,...c};this._extensions[m.extensionName]||(e.compress=!1),this._sender.send(b||r,e,d)}terminate(){if(this.readyState!==a.CLOSED){if(this.readyState===a.CONNECTING)return void N(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=a.CLOSING,this._socket.destroy())}}};function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,f.connect(a)}function M(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=f.isIP(a.host)?"":a.host),g.connect(a)}function N(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,N),b.setHeader?(b[D]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function O(a,b,c){if(b){let c=p(b)?b.size:C(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${F[a.readyState]})`);process.nextTick(c,b)}}function P(a,b){let c=this[w];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[w]&&(c._socket.removeListener("data",af),process.nextTick(ab,c._socket),1005===a?c.close():c.close(a,b))}function R(){let a=this[w];a.isPaused||a._socket.resume()}function Y(a){let b=this[w];void 0!==b._socket[w]&&(b._socket.removeListener("data",af),process.nextTick(ab,b._socket),b.close(a[v])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function Z(){this[w].emitClose()}function $(a,b){this[w].emit("message",a,b)}function _(a){let b=this[w];b._autoPong&&b.pong(a,!this._isServer,x),b.emit("ping",a)}function aa(a){this[w].emit("pong",a)}function ab(a){a.resume()}function ac(a){let b=this[w];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,ad(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function ad(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function ae(){let a,b=this[w];this.removeListener("close",ae),this.removeListener("data",af),this.removeListener("end",ag),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[w]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",Z),b._receiver.on("finish",Z))}function af(a){this[w]._receiver.write(a)||this.pause()}function ag(){let a=this[w];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function ah(){let a=this[w];this.removeListener("error",ah),this.on("error",x),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:F.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:F.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:F.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:F.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:F.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:F.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:F.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:F.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[t])return b[u];return null},set(b){for(let b of this.listeners(a))if(b[t]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[t]:!0})}})}),I.prototype.addEventListener=y,I.prototype.removeEventListener=z,b.exports=I}}),Z=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/subprotocol.js"(a,b){var{tokenChars:c}=T();b.exports={parse:function(a){let b=new Set,d=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===c[g])-1===d&&(d=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==d&&(e=f);else if(44===g){if(-1===d)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let c=a.slice(d,e);if(b.has(c))throw SyntaxError(`The "${c}" subprotocol is duplicated`);b.add(c),d=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===d||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(d,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}}}),$=I({"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/websocket-server.js"(a,b){var c=H("events"),d=H("http"),{Duplex:e}=H("stream"),{createHash:f}=H("crypto"),g=X(),h=S(),i=Z(),j=Y(),{GUID:k,kWebSocket:l}=L(),m=/^[+/0-9A-Za-z]{22}==$/;function n(a){a._state=2,a.emit("close")}function o(){this.destroy()}function p(a,b,c,e){c=c||d.STATUS_CODES[b],e={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...e},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${d.STATUS_CODES[b]}\r
`+Object.keys(e).map(a=>`${a}: ${e[a]}`).join("\r\n")+"\r\n\r\n"+c)}function q(a,b,c,d,e){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,q),a.emit("wsClientError",d,c,b)}else p(c,d,e)}b.exports=class extends c{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:j,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=d.createServer((a,b)=>{let c=d.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(n,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(n,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{n(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",o);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,j=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void q(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void q(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!m.test(e))return void q(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==j&&13!==j)return void q(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(a))return void p(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=i.parse(k)}catch(c){q(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let n=a.headers["sec-websocket-extensions"],r={};if(this.options.perMessageDeflate&&void 0!==n){let c=new h(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=g.parse(n);a[h.extensionName]&&(c.accept(a[h.extensionName]),r[h.extensionName]=c)}catch(c){q(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===j?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return p(b,g||401,h,i);this.completeUpgrade(r,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return p(b,401)}this.completeUpgrade(r,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,i,j){if(!e.readable||!e.writable)return e.destroy();if(e[l])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return p(e,503);let m=f("sha1").update(b+k).digest("base64"),q=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${m}`],r=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(q.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[h.extensionName]){let b=a[h.extensionName].params,c=g.format({[h.extensionName]:[b]});q.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",q,d),e.write(q.concat("\r\n").join("\r\n")),e.removeListener("error",o),r.setSocket(e,i,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(n,this)})),j(r,d)}}}});J(K(),1),J(U(),1),J(V(),1);var _=J(Y(),1);J($(),1),_.default},43126:(a,b,c)=>{c.d(b,{d:()=>v,v:()=>w});var d=c(87503),e=Object.defineProperty,f=(a,b,c)=>((a,b,c)=>b in a?e(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);function g(a,b){let c=void 0!==b?` for field "${b}"`:"";throw Error(`A validator is undefined${c} in ${a}. This is often caused by circular imports. See https://docs.convex.dev/error#undefined-validator for details.`)}class h{constructor({isOptional:a}){f(this,"type"),f(this,"fieldPaths"),f(this,"isOptional"),f(this,"isConvexValidator"),this.isOptional=a,this.isConvexValidator=!0}}class i extends h{constructor({isOptional:a,tableName:b}){if(super({isOptional:a}),f(this,"tableName"),f(this,"kind","id"),"string"!=typeof b)throw Error("v.id(tableName) requires a string");this.tableName=b}get json(){return{type:"id",tableName:this.tableName}}asOptional(){return new i({isOptional:"optional",tableName:this.tableName})}}class j extends h{constructor(){super(...arguments),f(this,"kind","float64")}get json(){return{type:"number"}}asOptional(){return new j({isOptional:"optional"})}}class k extends h{constructor(){super(...arguments),f(this,"kind","int64")}get json(){return{type:"bigint"}}asOptional(){return new k({isOptional:"optional"})}}class l extends h{constructor(){super(...arguments),f(this,"kind","boolean")}get json(){return{type:this.kind}}asOptional(){return new l({isOptional:"optional"})}}class m extends h{constructor(){super(...arguments),f(this,"kind","bytes")}get json(){return{type:this.kind}}asOptional(){return new m({isOptional:"optional"})}}class n extends h{constructor(){super(...arguments),f(this,"kind","string")}get json(){return{type:this.kind}}asOptional(){return new n({isOptional:"optional"})}}class o extends h{constructor(){super(...arguments),f(this,"kind","null")}get json(){return{type:this.kind}}asOptional(){return new o({isOptional:"optional"})}}class p extends h{constructor(){super(...arguments),f(this,"kind","any")}get json(){return{type:this.kind}}asOptional(){return new p({isOptional:"optional"})}}class q extends h{constructor({isOptional:a,fields:b}){super({isOptional:a}),f(this,"fields"),f(this,"kind","object"),globalThis.Object.entries(b).forEach(([a,b])=>{if(void 0===b&&g("v.object()",a),!b.isConvexValidator)throw Error("v.object() entries must be validators")}),this.fields=b}get json(){return{type:this.kind,value:globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([a,b])=>[a,{fieldType:b.json,optional:"optional"===b.isOptional}]))}}asOptional(){return new q({isOptional:"optional",fields:this.fields})}omit(...a){let b={...this.fields};for(let c of a)delete b[c];return new q({isOptional:this.isOptional,fields:b})}pick(...a){let b={};for(let c of a)b[c]=this.fields[c];return new q({isOptional:this.isOptional,fields:b})}partial(){let a={};for(let[b,c]of globalThis.Object.entries(this.fields))a[b]=c.asOptional();return new q({isOptional:this.isOptional,fields:a})}extend(a){return new q({isOptional:this.isOptional,fields:{...this.fields,...a}})}}class r extends h{constructor({isOptional:a,value:b}){if(super({isOptional:a}),f(this,"value"),f(this,"kind","literal"),"string"!=typeof b&&"boolean"!=typeof b&&"number"!=typeof b&&"bigint"!=typeof b)throw Error("v.literal(value) must be a string, number, or boolean");this.value=b}get json(){return{type:this.kind,value:(0,d.rz)(this.value)}}asOptional(){return new r({isOptional:"optional",value:this.value})}}class s extends h{constructor({isOptional:a,element:b}){super({isOptional:a}),f(this,"element"),f(this,"kind","array"),void 0===b&&g("v.array()"),this.element=b}get json(){return{type:this.kind,value:this.element.json}}asOptional(){return new s({isOptional:"optional",element:this.element})}}class t extends h{constructor({isOptional:a,key:b,value:c}){if(super({isOptional:a}),f(this,"key"),f(this,"value"),f(this,"kind","record"),void 0===b&&g("v.record()","key"),void 0===c&&g("v.record()","value"),"optional"===b.isOptional)throw Error("Record validator cannot have optional keys");if("optional"===c.isOptional)throw Error("Record validator cannot have optional values");if(!b.isConvexValidator||!c.isConvexValidator)throw Error("Key and value of v.record() but be validators");this.key=b,this.value=c}get json(){return{type:this.kind,keys:this.key.json,values:{fieldType:this.value.json,optional:!1}}}asOptional(){return new t({isOptional:"optional",key:this.key,value:this.value})}}class u extends h{constructor({isOptional:a,members:b}){super({isOptional:a}),f(this,"members"),f(this,"kind","union"),b.forEach((a,b)=>{if(void 0===a&&g("v.union()",`member at index ${b}`),!a.isConvexValidator)throw Error("All members of v.union() must be validators")}),this.members=b}get json(){return{type:this.kind,value:this.members.map(a=>a.json)}}asOptional(){return new u({isOptional:"optional",members:this.members})}}function v(a){return!!a.isConvexValidator}let w={id:a=>new i({isOptional:"required",tableName:a}),null:()=>new o({isOptional:"required"}),number:()=>new j({isOptional:"required"}),float64:()=>new j({isOptional:"required"}),bigint:()=>new k({isOptional:"required"}),int64:()=>new k({isOptional:"required"}),boolean:()=>new l({isOptional:"required"}),string:()=>new n({isOptional:"required"}),bytes:()=>new m({isOptional:"required"}),literal:a=>new r({isOptional:"required",value:a}),array:a=>new s({isOptional:"required",element:a}),object:a=>new q({isOptional:"required",fields:a}),record:(a,b)=>new t({isOptional:"required",key:a,value:b}),union:(...a)=>new u({isOptional:"required",members:a}),any:()=>new p({isOptional:"required"}),optional:a=>a.asOptional(),nullable:a=>w.union(a,w.null())}},43427:(a,b,c)=>{c.d(b,{r:()=>d});let d="1.31.7"},44283:(a,b,c)=>{c.d(b,{dp:()=>g,qQ:()=>f});var d=c(53512),e=c(48568);function f(a){let b=(0,e.Jc)(a);if(void 0===b.name){if(void 0!==b.functionHandle)throw Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${b.functionHandle}`);if(void 0!==b.reference)throw Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${b.reference}`);throw Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(b)}`)}if("string"==typeof a)return a;let c=a[d.A];if(!c)throw Error(`${a} is not a functionReference`);return c}let g=function a(b=[]){return new Proxy({},{get(c,e){if("string"==typeof e)return a([...b,e]);if(e===d.A){if(b.length<2){let a=["api",...b].join(".");throw Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${a}\``)}let a=b.slice(0,-1).join("/"),c=b[b.length-1];return"default"===c?a:a+":"+c}return e===Symbol.toStringTag?"FunctionReference":void 0}})}()},48568:(a,b,c)=>{c.d(b,{Jc:()=>f,QY:()=>e});var d=c(53512);let e=Symbol.for("toReferencePath");function f(a){let b;if("string"==typeof a)b=a.startsWith("function://")?{functionHandle:a}:{name:a};else if(a[d.A])b={name:a[d.A]};else{let c=a[e]??null;if(!c)throw Error(`${a} is not a functionReference`);b={reference:c}}return b}},53512:(a,b,c)=>{c.d(b,{A:()=>d});let d=Symbol.for("functionName")},60631:(a,b,c)=>{c.d(b,{i:()=>j});var d,e,f=c(87503),g=Object.defineProperty,h=(a,b,c)=>((a,b,c)=>b in a?g(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c);let i=Symbol.for("ConvexError");class j extends(e=Error,d=i,e){constructor(a){super("string"==typeof a?a:(0,f.E$)(a)),h(this,"name","ConvexError"),h(this,"data"),h(this,d,!0),this.data=a}}},68227:(a,b,c)=>{c.d(b,{bg:()=>j,iI:()=>k});for(var d=[],e=[],f=Uint8Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,i=g.length;h<i;++h)d[h]=g[h],e[g.charCodeAt(h)]=h;function j(a){var b,c,d=function(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}(a),g=d[0],h=d[1],i=new f((g+h)*3/4-h),j=0,k=h>0?g-4:g;for(c=0;c<k;c+=4)b=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],i[j++]=b>>16&255,i[j++]=b>>8&255,i[j++]=255&b;return 2===h&&(b=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,i[j++]=255&b),1===h&&(b=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,i[j++]=b>>8&255,i[j++]=255&b),i}function k(a){for(var b,c=a.length,e=c%3,f=[],g=0,h=c-e;g<h;g+=16383)f.push(function(a,b,c){for(var e,f=[],g=b;g<c;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(d[e>>18&63]+d[e>>12&63]+d[e>>6&63]+d[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(d[(b=a[c-1])>>2]+d[b<<4&63]+"=="):2===e&&f.push(d[(b=(a[c-2]<<8)+a[c-1])>>10]+d[b>>4&63]+d[b<<2&63]+"="),f.join("")}e[45]=62,e[95]=63},79269:(a,b,c)=>{c.d(b,{ik:()=>e.i,rz:()=>d.rz,du:()=>d.du});var d=c(87503);c(43126),c(68227);var e=c(60631);let f=()=>Array.from({length:4},()=>0);f(),f()},87503:(a,b,c)=>{c.d(b,{E$:()=>o,cy:()=>t,du:()=>function a(b){if(null===b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b)return b;if(Array.isArray(b))return b.map(b=>a(b));if("object"!=typeof b)throw Error(`Unexpected type of ${b}`);let c=Object.entries(b);if(1===c.length){let a=c[0][0];if("$bytes"===a){if("string"!=typeof b.$bytes)throw Error(`Malformed $bytes field on ${b}`);return d.bg(b.$bytes).buffer}if("$integer"===a){if("string"!=typeof b.$integer)throw Error(`Malformed $integer field on ${b}`);return m(b.$integer)}if("$float"===a){if("string"!=typeof b.$float)throw Error(`Malformed $float field on ${b}`);let a=d.bg(b.$float);if(8!==a.byteLength)throw Error(`Received ${a.byteLength} bytes, expected 8 for $float`);let c=new DataView(a.buffer).getFloat64(0,!0);if(!k(c))throw Error(`Float ${c} should be encoded as a number`);return c}if("$set"===a)throw Error("Received a Set which is no longer supported as a Convex type.");if("$map"===a)throw Error("Received a Map which is no longer supported as a Convex type.")}let e={};for(let[c,d]of Object.entries(b))n(c),e[c]=a(d);return e},rz:()=>s});var d=c(68227),e=c(93533);let f=BigInt("-9223372036854775808"),g=BigInt("9223372036854775807"),h=BigInt("0"),i=BigInt("8"),j=BigInt("256");function k(a){return Number.isNaN(a)||!Number.isFinite(a)||Object.is(a,-0)}let l=DataView.prototype.setBigInt64?function(a){if(a<f||g<a)throw Error(`BigInt ${a} does not fit into a 64-bit signed integer.`);let b=new ArrayBuffer(8);return new DataView(b).setBigInt64(0,a,!0),d.iI(new Uint8Array(b))}:function(a){a<h&&(a-=f+f);let b=a.toString(16);b.length%2==1&&(b="0"+b);let c=new Uint8Array(new ArrayBuffer(8)),e=0;for(let d of b.match(/.{2}/g).reverse())c.set([parseInt(d,16)],e++),a>>=i;return d.iI(c)},m=DataView.prototype.getBigInt64?function(a){let b=d.bg(a);if(8!==b.byteLength)throw Error(`Received ${b.byteLength} bytes, expected 8 for $integer`);return new DataView(b.buffer).getBigInt64(0,!0)}:function(a){let b=d.bg(a);if(8!==b.byteLength)throw Error(`Received ${b.byteLength} bytes, expected 8 for $integer`);let c=h,e=h;for(let a of b)c+=BigInt(a)*j**e,e++;return c>g&&(c+=f+f),c};function n(a){if(a.length>1024)throw Error(`Field name ${a} exceeds maximum field name length 1024.`);if(a.startsWith("$"))throw Error(`Field name ${a} starts with a '$', which is reserved.`);for(let b=0;b<a.length;b+=1){let c=a.charCodeAt(b);if(c<32||c>=127)throw Error(`Field name ${a} has invalid character '${a[b]}': Field names can only contain non-control ASCII characters`)}}function o(a){let b=JSON.stringify(a,(a,b)=>void 0===b?"undefined":"bigint"==typeof b?`${b.toString()}n`:b);if(b.length>16384){let a="[...truncated]",c=16384-a.length,d=b.codePointAt(c-1);return void 0!==d&&d>65535&&(c-=1),b.substring(0,c)+a}return b}function p(a,b,c,h){if(void 0===a){let a=c&&` (present at path ${c} in original object ${o(b)})`;throw Error(`undefined is not a valid Convex value${a}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(null===a)return a;if("bigint"==typeof a){if(a<f||g<a)throw Error(`BigInt ${a} does not fit into a 64-bit signed integer.`);return{$integer:l(a)}}if("number"==typeof a)if(!k(a))return a;else{let b=new ArrayBuffer(8);return new DataView(b).setFloat64(0,a,!0),{$float:d.iI(new Uint8Array(b))}}if("boolean"==typeof a||"string"==typeof a)return a;if(a instanceof ArrayBuffer)return{$bytes:d.iI(new Uint8Array(a))};if(Array.isArray(a))return a.map((a,d)=>p(a,b,c+`[${d}]`,!1));if(a instanceof Set)throw Error(q(c,"Set",[...a],b));if(a instanceof Map)throw Error(q(c,"Map",[...a],b));if(!(0,e.iY)(a)){let d=a?.constructor?.name;throw Error(q(c,d?`${d} `:"",a,b))}let i={},j=Object.entries(a);for(let[a,d]of(j.sort(([a,b],[c,d])=>a===c?0:a<c?-1:1),j))void 0!==d?(n(a),i[a]=p(d,b,c+`.${a}`,!1)):h&&(n(a),i[a]=r(d,b,c+`.${a}`));return i}function q(a,b,c,d){return a?`${b}${o(c)} is not a supported Convex type (present at path ${a} in original object ${o(d)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${b}${o(c)} is not a supported Convex type.`}function r(a,b,c){if(void 0===a)return{$undefined:null};if(void 0===b)throw Error(`Programming error. Current value is ${o(a)} but original value is undefined`);return p(a,b,c,!1)}function s(a){return p(a,a,"",!1)}function t(a){return r(a,a,"")}},93533:(a,b,c)=>{function d(a){if(void 0===a)return{};if(!f(a))throw Error(`The arguments to a Convex function must be an object. Received: ${a}`);return a}function e(a){if(void 0===a)throw Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if("string"!=typeof a)throw Error(`Invalid deployment address: found ${a}".`);if(!(a.startsWith("http:")||a.startsWith("https:")))throw Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${a}".`);try{new URL(a)}catch{throw Error(`Invalid deployment address: "${a}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(a.endsWith(".convex.site"))throw Error(`Invalid deployment address: "${a}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function f(a){let b="object"==typeof a,c=Object.getPrototypeOf(a),d=null===c||c===Object.prototype||c?.constructor?.name==="Object";return b&&d}c.d(b,{R6:()=>e,Zy:()=>d,iY:()=>f})}};