(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},606:(e,t,s)=>{"use strict";s.d(t,{BrowsePageClient:()=>m});var r=s(5155),a=s(2115),i=s(63),n=s(7481),l=s(8900),o=s(6651),c=s(5993),d=s(2348),u=s(949),h=s(6147);function m(){let e=(0,i.useSearchParams)(),t=(0,i.useRouter)(),s=null==e?void 0:e.get("category"),m=(null==e?void 0:e.get("sort"))||"newest",g=(null==e?void 0:e.get("q"))||"",[v,x]=(0,a.useState)(s||"all"),[p,y]=(0,a.useState)(m),[j,N]=(0,a.useState)(g),[k,w]=(0,a.useState)(g),[f,b]=(0,a.useState)(void 0),[C,S]=(0,a.useState)([]),[A,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(()=>{w(j)},300);return()=>clearTimeout(e)},[j]),(0,a.useEffect)(()=>{b(void 0),S([])},[v,p,k]);let M=(0,a.useMemo)(()=>{let e={sortBy:p,limit:20,cursor:f};return"all"!==v&&(e.category=v),k.trim()&&(e.searchQuery=k.trim()),e},[v,p,f,k]),P=(0,n.IT)(l.FH.creations.listPaginated,M);(0,a.useEffect)(()=>{(null==P?void 0:P.items)&&(f?S(e=>{let t=new Set(e.map(e=>e._id));return[...e,...P.items.filter(e=>!t.has(e._id))]}):S(P.items),_(!1))},[P,f]);let B=(0,a.useCallback)(()=>{(null==P?void 0:P.nextCursor)&&!A&&(_(!0),b(P.nextCursor))},[null==P?void 0:P.nextCursor,A]);(0,a.useEffect)(()=>{if(!(null==P?void 0:P.hasMore))return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&B()},{threshold:.1}),t=document.getElementById("load-more-sentinel");return t&&e.observe(t),()=>e.disconnect()},[B,null==P?void 0:P.hasMore]);let z="all"!==v?h.B[v]:null;return(0,r.jsxs)("div",{className:"container page-section",children:[(0,r.jsxs)("div",{style:{marginBottom:"var(--space-xl)"},children:[(0,r.jsx)("h1",{style:{fontSize:"clamp(1.5rem, 3vw, 2rem)",marginBottom:"0.5rem"},children:"Browse Designs"}),(0,r.jsx)("p",{className:"text-secondary",children:"Discover housing creations from the community"})]}),(0,r.jsxs)("div",{className:"browse-filters",children:[(0,r.jsxs)("div",{className:"browse-search",children:[(0,r.jsx)(o.A,{size:18,className:"browse-search-icon"}),(0,r.jsx)("input",{type:"text",placeholder:"Search designs...",value:j,onChange:e=>N(e.target.value),className:"input"})]}),(0,r.jsxs)("select",{value:v,onChange:s=>(s=>{var r;x(s);let a=new URLSearchParams(null!=(r=null==e?void 0:e.toString())?r:"");"all"===s?a.delete("category"):a.set("category",s),t.push("/browse?".concat(a.toString()))})(s.target.value),className:"input",style:{width:"auto",minWidth:"140px"},children:[(0,r.jsx)("option",{value:"all",children:"All Categories"}),h.R.map(e=>(0,r.jsx)("option",{value:e,children:h.B[e]},e))]}),(0,r.jsxs)("select",{value:p,onChange:s=>(s=>{var r;y(s);let a=new URLSearchParams(null!=(r=null==e?void 0:e.toString())?r:"");a.set("sort",s),t.push("/browse?".concat(a.toString()))})(s.target.value),className:"input",style:{width:"auto",minWidth:"120px"},children:[(0,r.jsx)("option",{value:"newest",children:"Newest"}),(0,r.jsx)("option",{value:"popular",children:"Popular"})]})]}),P&&(0,r.jsxs)("p",{className:"browse-results",children:[P.totalCount," design",1!==P.totalCount?"s":""," found",z&&" in ".concat(z)]}),void 0===P?(0,r.jsx)("div",{style:{minHeight:"50vh"}}):0===C.length?(0,r.jsxs)("div",{className:"card empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:(0,r.jsx)(c.A,{size:32})}),(0,r.jsx)("h3",{style:{fontSize:"1.125rem",marginBottom:"0.5rem"},children:"No designs found"}),(0,r.jsx)("p",{className:"text-secondary",children:j?"Try a different search term":"No designs in this category yet"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"gallery-grid",children:C.map(e=>(0,r.jsx)(u.r,{creation:e},e._id))}),P.hasMore&&(0,r.jsx)("div",{id:"load-more-sentinel",style:{display:"flex",justifyContent:"center",padding:"var(--space-xl)"},children:A?(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)"},children:[(0,r.jsx)(d.A,{size:18,className:"animate-spin"}),"Loading more..."]}):(0,r.jsx)("button",{onClick:B,className:"btn btn-secondary",children:"Load More"})})]})]})}},818:(e,t,s)=>{Promise.resolve().then(s.bind(s,606))},949:(e,t,s)=>{"use strict";s.d(t,{r:()=>c});var r=s(5155),a=s(2619),i=s.n(a),n=s(3457),l=s(7828),o=s(6147);function c(e){var t;let s="creation"in e?{id:e.creation._id,title:e.creation.title,thumbnailUrl:e.creation.thumbnailUrl,category:e.creation.category,creatorName:e.creation.creatorName,likeCount:e.creation.likeCount,viewCount:e.creation.viewCount}:{id:e.id,title:e.title,thumbnailUrl:e.thumbnailUrl,category:e.category,creatorName:e.creatorName,likeCount:e.likeCount,viewCount:null!=(t=e.viewCount)?t:0},a=e=>e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();return(0,r.jsxs)(i(),{href:"/design/".concat(s.id),className:"design-card",children:[(0,r.jsxs)("div",{className:"design-card-image",children:[s.thumbnailUrl?(0,r.jsx)("img",{src:s.thumbnailUrl,alt:s.title}):(0,r.jsx)("div",{className:"design-card-placeholder",children:(0,r.jsx)("img",{src:"/gearforge_logo_new.png",alt:"",className:"placeholder-logo"})}),(0,r.jsx)("span",{className:"design-card-badge",children:o.B[s.category]})]}),(0,r.jsxs)("div",{className:"design-card-content",children:[(0,r.jsx)("h3",{className:"design-card-title",children:s.title}),(0,r.jsxs)("p",{className:"design-card-creator",children:["by ",s.creatorName]}),(0,r.jsxs)("div",{className:"design-card-stats",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)(n.A,{size:14}),a(s.likeCount)]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(l.A,{size:14}),a(s.viewCount)]})]})]})]})}},2348:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},3457:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},5993:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},6147:(e,t,s)=>{"use strict";s.d(t,{B:()=>r,R:()=>a});let r={bedroom:"Bedroom",living_room:"Living Room",kitchen:"Kitchen",garden:"Garden",tavern:"Tavern",throne_room:"Throne Room",workshop:"Workshop",library:"Library",exterior:"Exterior",other:"Other"},a=["bedroom","living_room","kitchen","garden","tavern","throne_room","workshop","library","exterior","other"]},6651:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7828:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8900:(e,t,s)=>{"use strict";s.d(t,{FH:()=>a});var r=s(5991);let a=r.dp;(0,r.Op)()}},e=>{e.O(0,[619,237,441,255,358],()=>e(e.s=818)),_N_E=e.O()}]);